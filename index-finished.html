<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Planet p5.js</title>
  </head>
  <body>
    <h1>Planet JS</h1>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/p5.min.js"></script>
    <script>
      let sun;
      let earth;
      let moon;
      const canvasWidth = 800;
      const canvasHeight = 800;

      function setup() {
        frameRate(30);

        center = {
          x: canvasWidth / 2,
          y: canvasHeight / 2,
        };

        sun = new planet({
          name: 'sun',
          distance: 0,
          x: center.x,
          y: center.y,
          diameter: 100,
          speed: 0,
          color: 'gold',
          mother: null
        });

        mercury = new planet({
          name: 'mercury',
          distance: 70,
          x: center.x,
          y: center.y,
          diameter: 10,
          speed: 0.08,
          color: 'peru',
          mother: sun
        });

        venus = new planet({
          name: 'venus',
          distance: 90,
          x: center.x,
          y: center.y,
          diameter: 20,
          speed: 0.02,
          color: 'coral',
          mother: sun
        });

        earth = new planet({
            name: 'earth',
            distance: 130,
            x: center.x,
            y: center.y,
            diameter: 20.3,
            speed: 0.03,
            color: 'dodgerblue',
            mother: sun
        });

        moon = new planet({
            name: 'moon',
            distance: 15,
            x: center.x,
            y: center.y,
            diameter: 4,
            speed: 0.1,
            color: 'lemonchiffon',
            mother: earth
        });

        mars = new planet({
            name: 'mars',
            distance: 170,
            x: center.x,
            y: center.y,
            diameter: 15,
            speed: 0.01,
            color: 'tomato',
            mother: sun
        });

        jupiter = new planet({
            name: 'jupiter',
            distance: 250,
            x: center.x,
            y: center.y,
            diameter: 30,
            speed: 0.008,
            color: 'wheat',
            mother: sun
        });

        saturn = new planetWithRings({
            name: 'saturn',
            distance: 300,
            x: center.x,
            y: center.y,
            diameter: 27,
            speed: 0.006,
            color: 'lightsteelblue',
            mother: sun
        });

        createCanvas(canvasWidth, canvasHeight);
      }

      function draw() {
        background('midnightblue');
        sun.display();
        mercury.move();
        mercury.display();
        venus.move();
        venus.display();
        earth.move();
        earth.display();
        moon.move();
        moon.display();
        mars.move();
        mars.display();
        jupiter.move();
        jupiter.display();
        saturn.move();
        saturn.display();
        saturn.createRings();
      }

      class planet {
        constructor(data) {
          const { name, distance, x, y, diameter, speed, color, mother } = data;
          this.distance = distance;
          this.x = x;
          this.y = y;
          this.name = name;
          this.diameter = diameter;
          this.speed = speed;
          this.color = color;
          this.mother = mother;
          this.angle = 0;
        }

        display() {
          noStroke();
          fill(this.color);
          ellipse(this.x , this.y, this.diameter, this.diameter);
        }

        move() {
          if(this.mother) {
            this.x = this.mother.x;
            this.y = this.mother.y;
          }
          this.x = this.x + (this.distance * Math.sin(this.angle));
          this.y = this.y + (this.distance * Math.cos(this.angle));
          this.angle += this.speed;
        }
      }

      class planetWithRings extends planet {
        constructor(data) {
          super(data);
          this.number = 60;
        }

        createRings() {
          noStroke();
          fill('white');
          for(let i=0; i < this.number; i++) {
            const posX = window[this.name].x + (this.diameter * Math.sin(this.angle + i*2));
            const posY = window[this.name].y + (this.diameter  * Math.cos(this.angle - i*2));
            ellipse(posX , posY, this.diameter/8, this.diameter/8);
          }
        }
      }
    </script>
  </body>
</html>